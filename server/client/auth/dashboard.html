<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User/Admin Dashboard</title>
</head>
<body>
    <div class="sidebar">
        <h2>Dashboard</h2>
        <ul>
            <li onclick="showSection('products')">Products</li>
            <li onclick="showSection('orders')">Orders</li>
            <li onclick="showSection('account')">Account</li>
            <li onclick="showSection('settings')">Settings</li>
            <li onclick="showSection('admin')">Admin</li>
        </ul>
    </div>

    <div class="content">
        <div id="products" class="section">
            <h1>Products</h1>
            <div id="product-list">
                <!-- Products will be displayed here -->
            </div>
        </div>

        <div id="orders" class="section" style="display:none;">
            <h1>Orders</h1>
            <p>Manage your orders here...</p>
        </div>

        <div id="account" class="section" style="display:none;">
            <h1>Account</h1>
            <p>Manage your account information here...</p>
        </div>

        <div id="settings" class="section" style="display:none;">
            <h1>Settings</h1>
            <p>Change your settings here...</p>
        </div>

        <div id="admin" class="section" style="display:none;">
            <h1>Admin Panel</h1>
            <p>Admin-only controls here...</p>
        </div>
    </div>

    <script>
        function showSection(sectionId) {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.style.display = 'none');
            document.getElementById(sectionId).style.display = 'block';
        }

        async function fetchProducts() {
            try {
                const response = await fetch('/api/product/get-all-product');
                const products = await response.json();
                const productList = document.getElementById('product-list');

                if (products.length > 0) {
                    products.forEach(product => {
                        const productItem = document.createElement('div');
                        const productLink = document.createElement('a');
                        
                        productLink.href = `/product/${product._id}`;
                        productLink.textContent = product.name;

                        productItem.appendChild(productLink);
                        productItem.appendChild(document.createTextNode(` - Price: $${product.price}`));
                        productList.appendChild(productItem);
                    });
                } else {
                    productList.textContent = 'No products available.';
                }
            } catch (err) {
                console.error('Error fetching products:', err);
                document.getElementById('product-list').textContent = 'Error loading products.';
            }
        }

        // Load products when the Products section is first shown
        document.addEventListener('DOMContentLoaded', function() {
            showSection('products');
            fetchProducts();
        });
    </script>
</body>
</html>